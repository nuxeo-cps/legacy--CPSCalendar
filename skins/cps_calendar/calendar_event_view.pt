<tal:block define="current_action string:view"
           i18n:domain="cpscalendar">
  <html metal:use-macro="here/main_template/macros/master">

    <metal:block fill-slot="header_plus" />

    <metal:block fill-slot="main">

      <tal:block define="event nocall:here">

	<tal:block tal:condition="nothing">
	  <!-- Debug block that doesn't appear in the output -->
	  <tal:block define="
	    calendar_id here/id;
	    event_user_id python:event.getCalendarUser();
	    authenticated_user python:here.portal_membership.getAuthenticatedMember();
	    authenticated_user_id python:here.portal_membership.getAuthenticatedMember().getMemberId();
	    member_id member/getMemberId;
	    local_event1 python:authenticated_user_id == event.getCalendarUser();
	    local_event2 python:member.getMemberId() == event.getCalendarUser();
	    ">
	    <p>
	      calendar_id <tal:block tal:replace="calendar_id"/><br/>
	      authenticated_user <tal:block tal:replace="authenticated_user"/><br/>
	      authenticated_user_id <tal:block tal:replace="authenticated_user_id"/><br/>
	      member_id <tal:block tal:replace="member_id"/><br/>
	      event_user_id <tal:block tal:replace="event_user_id"/><br/>
	      local_event1 ? <tal:block tal:replace="local_event1"/><br/>
	      local_event2 ? <tal:block tal:replace="local_event2"/>
	    </p>
	  </tal:block>
	</tal:block>

	<metal:block use-macro="here/calendar_macros/macros/event_view"/>

      </tal:block>

      <metal:block use-macro="here/calendar_macros/macros/notifyattendees" />

    </metal:block>

  </html>
</tal:block>
